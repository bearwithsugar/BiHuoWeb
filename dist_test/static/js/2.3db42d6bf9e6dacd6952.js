webpackJsonp([2],{"5t7i":function(t,e){},"6U3L":function(t,e,a){"use strict";function s(t){a("7ILb")}var i=a("TtmE"),n=a("rA5e"),c=a("XvEg"),l=a("UM93"),o={components:{VDialog:i.a},props:{actid:{type:String,required:!0}},data:function(){return{editState:{nameState:!0},spreadWayTable:[]}},methods:{close:function(){this.$emit("close")},publish:function(){var t=this;c.a.publish({data:{id:this.actid}}).then(function(e){e.suc&&(Object(l.Message)({type:"success",message:"发布成功"}),t.$router.push({path:"/nav-my"}))})}},mounted:function(){var t=this;console.log(this.actid),n.a.query({data:{activityId:this.actid}}).then(function(e){e.suc&&200===e.code&&(t.spreadWayTable=e.rs,t.spreadWayTable.forEach(function(t){t.channelID=t.id})),console.log(e)})}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{title:"渠道管理"},on:{close:t.close}},[a("div",{staticClass:"sources-wrap"},[a("div",{staticClass:"sources-manage"},[a("div",{staticClass:"label"},[t._v("哪个渠道客户/流量最多？设置不同渠道分享链接你就知道")]),t._v(" "),a("div",{staticClass:"spreadWay"},[a("div",{staticClass:"default"},[a("div",[t._v("默认渠道分享：")]),t._v(" "),a("div",{staticClass:"share-code"},[a("img",{attrs:{src:"/static/imgs/index/wechat-code.png",alt:""}}),t._v(" "),a("div",{staticClass:"share-code_label"},[t._v("扫一扫分享到微信\n              "),a("i",{staticClass:"el-icon-download"})])]),t._v(" "),a("div",{staticClass:"link-copy-wrap"},[a("el-input",{staticClass:"link-copy-input",attrs:{placeholder:"请输入内容",value:"http://baidu.com"}},[a("template",{slot:"append"},[t._v("复制链接")])],2)],1),t._v(" "),a("div",{staticClass:"preview-share_describe"},[t._v("您可以将活动链接复制到您的公众号菜单，或自定义回复中")])]),t._v(" "),a("div",{staticClass:"other"},[a("div",{staticStyle:{"font-size":"16px",color:"#5A5A5A"}},[t._v("其他渠道分享：")]),t._v(" "),a("div",{staticClass:"other-describe"},[a("span",{staticClass:"other-describe_text"},[t._v("您可将连接（或二维码）放置在微信公众号、或者户外广告等不同渠道，供用户访问。结果统计中可区分用户来自哪个渠道")]),t._v(" "),a("el-button",[a("i",{staticClass:"el-icon-plus"}),t._v("添加渠道")])],1),t._v(" "),a("div",{staticClass:"spread-way-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.spreadWayTable,border:""}},[a("el-table-column",{attrs:{label:"渠道名称",prop:"name",width:"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"edit-name"},[a("el-input",{class:{editState:0==t.editState.nameState},attrs:{placeholder:t.editState.nameState?"未填写":"最多20字"},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.editState.nameState,expression:"editState.nameState"}],attrs:{type:"text"},on:{click:function(e){e.preventDefault(),t.editState.nameState=!1}}},[t._v("修改")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.editState.nameState,expression:"!editState.nameState"}],attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.editChannel(e)}}},[t._v("保存")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"链接",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",[t._v(t._s(e.row.link))]),t._v(" "),a("el-button",{attrs:{type:"text"}},[t._v("复制")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"二维码",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"spread-code"},[a("img",{attrs:{src:e.row.code,alt:""}}),t._v(" "),a("i",{staticClass:"el-icon-download"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"}},[t._v("删除")])]}}])})],1)],1)])]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{on:{click:t.publish}},[t._v("确定发布")]),t._v(" "),a("el-button",{on:{click:t.close}},[t._v("再看看")])],1)])])])},d=[],v={render:r,staticRenderFns:d},u=v,p=a("Z0/y"),_=s,m=p(o,u,!1,_,"data-v-1614a86a",null);e.a=m.exports},"7ILb":function(t,e){},FHze:function(t,e){},"Mj8/":function(t,e){},TseZ:function(t,e,a){"use strict";a.d(e,"a",function(){return c});var s=a("2sCs"),i=a.n(s),n=a("WZtK");n.a.init(i.a);var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.data,s=e.methods,c=void 0===s?"get":s,l=e.baseURL,o=e.ContentType;return i.a.request({url:t,headers:{"Content-Type":o||"application/json"},method:c.toLowerCase(),baseURL:l||""+n.b.url,params:"get"===c.toLowerCase()?a:null,data:"get"!==c.toLowerCase()?a:null,timeout:5e3,responseType:"json",validateStatus:function(t){return t>=200&&t<300}})}},TtmE:function(t,e,a){"use strict";function s(t){a("FHze")}var i={name:"VDialog",props:{showClose:{type:Boolean,default:!0},title:{type:String,default:""}},methods:{closeDialog:function(){this.$emit("close")}}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-dialog"},[a("div",{staticClass:"v-dialog_bg"}),t._v(" "),a("div",{staticClass:"v-dialog_con"},[t.showClose?a("div",{staticClass:"v-dialog_close v-icon",on:{click:t.closeDialog}},[t._v("")]):t._e(),t._v(" "),a("div",{staticClass:"v-dialog_hd"},[t.title?a("span",{staticClass:"v-dialog_title"},[t._v(t._s(t.title))]):t._e()]),t._v(" "),a("div",{staticClass:"v-dialog_bd"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"v-dialog_ft"},[t._t("dialog_ft")],2)])])},c=[],l={render:n,staticRenderFns:c},o=l,r=a("Z0/y"),d=s,v=r(i,o,!1,d,"data-v-0ffe1764",null);e.a=v.exports},WZtK:function(t,e,a){"use strict";a.d(e,"b",function(){return c}),a.d(e,"a",function(){return l});var s=a("rVsN"),i=a.n(s),n=a("UM93"),c=(a.n(n),{development:{url:"http://1655w941f1.51mypc.cn"},production:{url:""}}.production||{url:"http://1655w941f1.51mypc.cn"}),l={init:function(t){t.defaults.baseURL=""+c.url,t.interceptors.request.use(function(t){return localStorage.BHTOKEN&&(t.headers["pi-businesstkn"]=localStorage.BHTOKEN),t},function(t){return i.a.reject(t)}),t.interceptors.response.use(function(t){var e=t.data||t;return 403===e.code&&(localStorage.BHTOKEN="",location.href="index.html"),!1===e.suc&&e.msg?(Object(n.Message)({message:e.msg,type:"warning",customClass:"message-tip",duration:3e3}),!1):e},function(t){return i.a.reject(t)})}}},XvEg:function(t,e,a){"use strict";var s=a("TseZ");e.a={getTemplates:function(t){return Object(s.a)("/pi/mod/main/"+t.size+"/"+t.page,t)},create:function(t){return Object(s.a)("/pi/bizactivity/create/"+t.id,t)},recommend:function(t){return Object(s.a)("/pi/bizactivity/indexContent",t)},myActs:function(t){return Object(s.a)("/pi/bizactivity/mine",t)},edit:function(t){return s.a.post("/pi/bizactivity/update/"+t.id,t)},getDetail:function(t){return Object(s.a)("/pi/bizactivity/get/"+t.id,t)},getList:function(t){return Object(s.a)("/pi/bizactivity/mine",t)},haggle:function(t){return Object(s.a)("/pi/bizactivity/haggle/detail",t)},save:function(t){return Object(s.a)("/pi/bizactivity/haggle/save",t)},publish:function(t){return Object(s.a)("/pi/bizactivity/publish",t)},copy:function(t){return Object(s.a)("/pi/bizactivity/copy",t)},delete:function(t){return Object(s.a)("/pi/bizactivity/delete",t)}}},Y6hR:function(t,e,a){"use strict";function s(t){a("Mj8/")}function i(t){a("5t7i"),a("kiAC")}function n(t){a("ucCG"),a("v/ON")}Object.defineProperty(e,"__esModule",{value:!0});var c=a("hRKE"),l=a.n(c),o=a("XvEg"),r=a("n95b"),d=a("rA5e"),v=a("UM93"),u=a("6U3L"),p=a("TtmE"),_={components:{VDialog:p.a},props:{actid:{type:String,required:!0}},data:function(){return{editState:{nameState:!0},spreadWayTable:[{name:"qq",link:"http://www.baidu.com",code:"/static/imgs/index/wechat-code.png"}]}}},m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{title:"活动预览"}},[a("div",{staticClass:"preview-wrap"},[a("div",{staticClass:"preview"},[a("div",{staticClass:"preview-box"},[a("div",{staticClass:"preview-head"},[a("div",{staticClass:"t"}),t._v(" "),a("div",{staticClass:"d"},[a("span",[t._v("这里显示活动主题")])])]),t._v(" "),a("div",{staticClass:"preview-body"},[t._v("666")]),t._v(" "),a("div",{staticClass:"preview-foot"},[t._v("技术支持：必火互动")])]),t._v(" "),a("div",{staticClass:"preview-data"},[a("div",{staticClass:"img-box flexBox"},[a("img",{attrs:{src:"/static/imgs/temp/图层 14@2x.png",alt:""}}),t._v(" "),a("div",{staticClass:"flex1"},[a("div",{staticClass:"title"},[a("span",{staticClass:"title-tag"},[t._v("砍价")]),t._v(" "),a("span",{staticClass:"title-text"},[t._v("这里显示此次活动标题")])]),t._v(" "),a("p",{staticClass:"des"},[t._v("啥实打实大师大师大师大师的实打实大师达到")]),t._v(" "),a("div",{staticClass:"time"},[a("span",{staticClass:"val"},[a("i",{staticClass:"el-icon-time"}),t._v("创建时间：2018-1-10 15:30:24 ")]),t._v(" "),a("span",{staticClass:"edit"},[t._v("去编辑\n                "),a("span",{staticClass:"el-icon-edit-outline"})])])])]),t._v(" "),a("div",{staticClass:"preview-share"},[a("div",{staticClass:"share-code"},[a("img",{attrs:{src:"/static/imgs/index/wechat-code.png",alt:""}}),t._v(" "),a("div",{staticClass:"share-code_label"},[t._v("扫一扫分享到微信")]),t._v(" "),a("div",{staticClass:"down-code"},[a("i",{staticClass:"el-icon-download"}),t._v("下载二维码")])]),t._v(" "),a("div",{staticClass:"share-otherWay"},[a("div",{staticClass:"share-otherWay_title"},[t._v("分享到：")]),t._v(" "),a("ul",{staticClass:"other-way"},[a("li",[a("i",{staticClass:"el-icon-edit-outline"}),t._v("QQ")]),t._v(" "),a("li",[a("i",{staticClass:"el-icon-edit-outline"}),t._v("QQ空间")]),t._v(" "),a("li",[a("i",{staticClass:"el-icon-edit-outline"}),t._v("微博")])]),t._v(" "),a("div",{staticClass:"link-copy-wrap"},[a("el-input",{attrs:{placeholder:"请输入内容",value:"http://baidu.com"}},[a("template",{slot:"append"},[t._v("复制链接")])],2)],1),t._v(" "),a("div",{staticClass:"preview-share_describe"},[t._v("您可以将活动链接复制到您的公众号菜单或自定义回复中。")])])]),t._v(" "),a("div",{staticClass:"spread"},[a("i",{staticClass:"el-icon-edit-outline"}),t._v("我要推广")])])])])])},h=[],f={render:m,staticRenderFns:h},g=f,b=a("Z0/y"),C=s,y=b(_,g,!1,C,"data-v-60d3a096",null),w=y.exports,S={props:{userActivityId:{type:Number}},data:function(){return{form:{},activityHaggle:{},industry:{},surplusDate:{},activityShopList:[]}},methods:{},mounted:function(){var t=this;console.log(this.userActivityId),o.a.haggle({data:{userActivityId:this.userActivityId}}).then(function(e){if(e.suc){t.form=e.rs,t.activityHaggle=e.rs.activityHaggle,t.activityShopList=e.rs.activityShopList;var a=r.a.DateCalculate(t.form.beginTime,t.form.endTime);t.surplusDate=a}})}},x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"preview"},[a("div",{staticClass:"phone-top"}),t._v(" "),a("div",{staticClass:"phone-main"},[a("div",{staticClass:"phone-head"},[a("div",{staticClass:"phone-show"}),t._v(" "),a("div",{staticClass:"phone-title"},[a("p",[t._v(t._s(t.form.activityName))])])]),t._v(" "),a("div",{staticClass:"phone-content"},[a("div",{staticClass:"phone-t1"},[t._v("98人查看 88人报名 11人分享")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"haggle"},[a("div",[a("p",{staticClass:"activityName"},[t._v(t._s(t.form.activityName))]),t._v(" "),a("div",{staticClass:"t2"},[a("div",{staticClass:"t2-content"},[a("p",[t._v("砍价目标：\n                  "),a("span",[t._v(t._s(t.activityHaggle.formalPrice))]),t._v("元")]),t._v(" "),a("p",[t._v("商品原价：\n                  "),a("span",[t._v(t._s(t.activityHaggle.afterPrice))]),t._v("元")]),t._v(" "),a("p",[t._v("支持人数：\n                  "),a("span",[t._v(t._s(t.activityHaggle.limitPerson))]),t._v("人")])]),t._v(" "),a("img",{attrs:{src:"static/imgs/manage/editor/t2.png"}})]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"t4 mar-t-15"},[a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.day/10|0||0))]),t._v(" "),a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.day%10||0))]),t._v(" "),a("span",{staticClass:"t4-tt"},[t._v("天")]),t._v(" "),a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.hours/10|0||0))]),t._v(" "),a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.hours%10||0))]),t._v(" "),a("span",{staticClass:"t4-tt"},[t._v("时")]),t._v(" "),a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.minutes/10|0||0))]),t._v(" "),a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.minutes%10||0))]),t._v(" "),a("span",{staticClass:"t4-tt"},[t._v("分")]),t._v(" "),a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.t/10|0||0))]),t._v(" "),a("span",{staticClass:"t4-t"},[t._v(t._s(t.surplusDate.t%10||0))]),t._v(" "),a("span",{staticClass:"t4-tt"},[t._v("秒")])]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"haggle-title"},[t._v("\n              活动描述\n            ")]),t._v(" "),a("div",{staticClass:"haggle-box",attrs:{id:"goodsDesciption"}},[t._v(t._s(t.form.description))]),t._v(" "),a("div",{staticClass:"haggle-title"},[t._v("\n              更多惊喜\n            ")]),t._v(" "),a("div",{staticClass:"haggle-box",attrs:{id:"elSurprised"}},[t._v(t._s(t.form.surprise))]),t._v(" "),a("div",{staticClass:"haggle-title"},[t._v("\n              活动规则\n            ")]),t._v(" "),a("div",{staticClass:"haggle-box"},[t._v(t._s(t.form.rule))]),t._v(" "),a("div",{staticClass:"haggle-title"},[t._v("\n              活动主办方\n            ")]),t._v(" "),a("div",{staticClass:"haggle-box"},[a("div",{attrs:{id:"industryDesc"}}),t._v(" "),a("div",{staticClass:"dashed",staticStyle:{"border-color":"#C3C3C3"}}),t._v(" "),a("div",{staticClass:"industry-title"},[a("img",{attrs:{src:t.industry.industryLogo}}),t._v(" "),a("p",{staticClass:"mar-t-15 t-center"},[t._v(t._s(t.form.industryName))])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("div",[a("p",[t._v("一键拨号：")]),t._v(" "),a("div",{staticClass:"haggle-button sponsor-phone"},[a("i",{staticClass:"el-icon-phone icon icon-left",staticStyle:{position:"absolute",left:"18px"}}),t._v("\n                    "+t._s(t.form.industryPhone))]),t._v(" "),a("p",{staticClass:"font-small"},[t._v("\n                    "+t._s(t.form.industryProvince)+t._s(t.form.industryCity)+t._s(t.form.industryArea)+t._s(t.form.industryStreet)+"\n                  ")])]),t._v(" "),a("div",[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.industry.industryUrl}})])])]),t._v(" "),a("div",{staticStyle:{height:"2px",background:"#ffdde2"}}),t._v(" "),t._l(t.activityShopList,function(e,s){return a("div",{staticClass:"sponsor-shop"},[t._m(4,!0),t._v(" "),a("div",{staticClass:"sponsor-shop-content"},[a("p",[t._v(t._s(e.shopName))]),t._v(" "),a("p",{staticClass:"font-small"},[t._v(t._s(e.shopAddress))]),t._v(" "),a("p",{staticClass:"font-small"},[t._v(t._s(e.contacts)+" "+t._s(e.shopPhone)+" ")])]),t._v(" "),a("div",{staticClass:"sponsor-do-phone"},[t._v("\n                一键拨号\n              ")]),t._v(" "),s!=t.activityShopList.length-1?a("div",{staticClass:"dashed",staticStyle:{"border-color":"#C3C3C3",width:"100%",margin:"20px 0 0 0"}}):t._e()])})],2)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.skilShow,expression:"form.skilShow"}],staticClass:"content-foot"},[t._v("技术支持：必火互动")])]),t._v(" "),a("div",{staticClass:"phone-footer"})])])},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phone-mainImg"},[a("img",{attrs:{src:"static/imgs/manage/editor/mainImg1.png"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t3"},[a("img",{attrs:{src:"static/imgs/manage/editor/t3.png"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t5"},[a("div",{staticClass:"haggle-button"},[t._v("我要参加")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t6"},[a("img",{attrs:{src:"static/imgs/manage/editor/t6.png"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span")])}],k={render:x,staticRenderFns:A},T=k,D=a("Z0/y"),z=i,j=D(S,T,!1,z,"data-v-3f7711fb",null),O=j.exports,E={components:{DialogSources:u.a,DialogPreview:w,previewPhone:O},data:function(){return{editState:{nameState:!0},mainType:[{name:"营销互动",id:"",count:3},{name:"微图文",id:"",count:0},{name:"微传单",id:"",count:0}],listData:null,indexAct:{},lists:[{code:"../static/imgs/temp/图层 13@2x.png",img:"../static/imgs/temp/图层 14@2x.png",h1:"这里是活动名称",h2:"全民砍价模块",start:"2018-01-27 23:19:00",end:"2018-02-03 23:19:00",state:0,limit:100,total:200}],modal:{show:!1,content:"my-activities"},curModalTab:"preview",actFilter:{type:"",state:"",name:null},curAct:{},tableData:[],tempRow:null,channelList:null,currentPage:1,actDetailDialog:!1,spreadWayTable:[]}},methods:{goNew:function(){this.$router.push({path:"/nav-new"})},handleDelete:function(t,e){var a=this,s={id:e.channelID};console.log("Delete: "+e.channelID),d.a.channelDelete({data:s}).then(function(e){e.suc&&200===e.code&&a.spreadWayTable.splice(t,1)})},searchType:function(t){var e={innerType:t};this.getList(e)},searchStatus:function(t){var e={status:t};this.getList(e)},search:function(){var t={keyword:this.actFilter.name};this.getList(t)},toggleModal:function(){this.modal.show=!this.modal.show},more:function(t){var e=this;if("object"==(void 0===t?"undefined":l()(t))){this.indexAct=t;var a={activityId:t.actid};this.curModalTab="manage",this.modal.show=!0,d.a.query({data:a}).then(function(t){t.suc&&200===t.code&&(e.spreadWayTable=t.rs,e.spreadWayTable.forEach(function(t){t.channelID=t.id,t.nameState=!0}))})}else{var s=t.substring(t.length-1,t.length),i=t.substring(0,t.length-1);console.log(i),"1"==s&&o.a.copy({data:{id:i}}).then(function(t){t.suc&&(Object(v.Message)({type:"success",message:"复制成功"}),e.getList())}),"2"==s&&o.a.delete({data:{id:i}}).then(function(t){t.suc&&(Object(v.Message)({type:"success",message:"删除成功"}),e.getList())})}},createChannel:function(t){var e=this,a={channelName:t,userActivityId:this.indexAct.actid},s=this.indexAct;d.a.channelCreate({data:a}).then(function(t){return d.a.query({data:{activityId:s.actid}})}).then(function(t){t.suc&&200===t.code&&(e.spreadWayTable=t.rs,e.spreadWayTable.forEach(function(t){t.channelID=t.id,t.nameState=!0})),console.log(e.spreadWayTable)})},editMo:function(t){this.$set(t,"nameState",!1),console.log(t)},editChannel:function(t){var e={id:t.channelID,channelName:t.channel};d.a.channelEdit({data:e}),this.editState.nameState=!0},releaseAct:function(t){var e={id:t.actid};o.a.publish({data:e}).then(function(t){t.suc?(Object(v.Message)({type:"success",message:"保存成功"}),console.log("DONE")):console.log("GG")}),console.log(t.actid),this.curAct=t},previewAct:function(t){var e=this;this.indexAct=t,console.log("indexAct"+t.id);var a={activityId:t.actid};this.curAct=t,this.modal.show=!0,d.a.query({data:a}).then(function(t){t.suc&&200===t.code&&(e.spreadWayTable=t.rs,e.spreadWayTable.forEach(function(t){t.channelID=t.id,t.nameState=!0}))})},toEdit:function(){console.log("toEdit"+this.indexAct),this.editAct(this.indexAct)},editAct:function(t){console.log("act:::"+t.id),console.log("asdas:::"+this.indexAct.id),this.curAct=t,t.id&&this.$router.push({name:"collect",params:{id:t.id}})},dataAct:function(t){console.log(t),this.curAct=t},handleSizeChange:function(t){console.log("每页 "+t+" 条");var e={pageSize:t};this.getList(e)},handleCurrentChange:function(t){var e={page:t};this.getList(e),console.log("当前页: "+t)},formatState:function(t){var e={create:{type:"create",label:"未开始"},open:{type:"open",label:"进行中"},finish:{type:"finish",label:"已结束"}};return e[t]?e[t].label:"未开始"},getList:function(t){var e=this;t=t||null,o.a.getList({data:t}).then(function(t){console.log(t),e.listData=t.rs,e.tableData=t.rs.pageList,e.tableData.forEach(function(t){t.title=t.activityName,t.img=t.mainImg,t.code=t.shareUrl,t.actid=t.id,0!==t.status&&4!==t.status||(t.status="已创建"),1===t.status&&(t.status="发布"),2===t.status&&(t.status="暂停"),3===t.status&&(t.status="结束"),4===t.status&&(t.status="预发布"),t.startTime=r.a.formatDate(new Date(t.beginTime)),t.endTime=r.a.formatDate(new Date(t.endTime)),t.module=t.modName,t.limit=t.goodsCount,t.total=t.joinUserNum})})}},created:function(){this.$emit("leftAct",2),this.modal.show=!1},mounted:function(){this.getList()}},I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myact"},[a("p",{staticClass:"main-title"},[t._v("我的活动")]),t._v(" "),a("ul",{staticClass:"main-type flexBox"},t._l(t.mainType,function(e,s){return a("li",{key:s,class:0==s?"act":""},[t._v("\n      "+t._s(e.name)+"（"+t._s(e.count)+"）\n    ")])})),t._v(" "),a("div",{staticClass:"act-wrap"},[a("div",{staticClass:"act-hd"},[a("div",{staticClass:"act-hd_lt"},[a("div",{staticClass:"act-filter"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.actFilter}},[a("el-form-item",{staticClass:"filterConditions",attrs:{label:"筛选条件"}},[a("el-select",{attrs:{placeholder:"活动类别"},on:{change:t.searchType},model:{value:t.actFilter.type,callback:function(e){t.$set(t.actFilter,"type",e)},expression:"actFilter.type"}},[a("el-option",{attrs:{label:"砍价",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"集卡",value:"2"}})],1),t._v(" "),a("el-select",{attrs:{placeholder:"全部"},on:{change:t.searchStatus},model:{value:t.actFilter.state,callback:function(e){t.$set(t.actFilter,"state",e)},expression:"actFilter.state"}},[a("el-option",{attrs:{label:"已创建",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"发布",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"暂停",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"结束",value:"3"}})],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"act-hd_rt"},[a("div",{staticClass:"act-search"},[a("el-input",{attrs:{placeholder:"搜索活动"},model:{value:t.actFilter.name,callback:function(e){t.$set(t.actFilter,"name",e)},expression:"actFilter.name"}},[a("i",{staticClass:"el-icon-search",attrs:{slot:"suffix"},on:{click:t.search},slot:"suffix"})])],1),t._v(" "),a("div",[a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:t.goNew}},[a("i",{staticClass:"el-icon-circle-plus"}),t._v("新建活动")])],1)])]),t._v(" "),a("div",{staticClass:"act-bd"},[a("div",{staticClass:"act-table"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"活动名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"act-title flexBox"},[a("img",{staticClass:"icon icon-code",attrs:{src:e.row.code,alt:""}}),t._v(" "),a("img",{staticClass:"activity-img",attrs:{src:e.row.img,alt:""}}),t._v(" "),a("div",{staticClass:"name-text flex1"},[a("div",{staticClass:"text"},[a("p",{staticClass:"h1"},[t._v(t._s(e.row.title))]),t._v(" "),a("p",{staticClass:"h2"},[t._v(t._s(e.row.module))])])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动时间",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.startTime))]),t._v(" "),a("div",[t._v(t._s(e.row.endTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动状态",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:[{no:"create"==e.row.status},{ing:"open"==e.row.status},{over:"finish"==e.row.status}]},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"人数限制",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.limit))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"总参与人数",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.total))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.releaseAct(e.row)}}},[t._v("发布")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editAct(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.previewAct(e.row)}}},[t._v("预览")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.dataAct(e.row)}}},[t._v("数据")]),t._v(" "),a("div",[a("el-dropdown",{on:{command:t.more}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                    更多\n                    "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown",id:"udp"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:e.row.actid+"1"}},[t._v("复制")]),t._v(" "),a("el-dropdown-item",{attrs:{command:e.row.actid+"2"}},[t._v("删除")]),t._v(" "),a("el-dropdown-item",[t._v("推广")]),t._v(" "),a("el-dropdown-item",{attrs:{command:e.row}},[t._v("渠道管理")])],1)],1)],1)]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"act-ft"},[a("div",{staticClass:"act-table_pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.listData.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])]),t._v(" "),t.modal.show?a("modal",{staticClass:"perviewModal",staticStyle:{"z-index":"100"},attrs:{contentType:t.modal.content},on:{toggleModal:t.toggleModal}},[a("div",{staticClass:"m-nav"},[a("span",{class:{act:"preview"==t.curModalTab},on:{click:function(e){t.curModalTab="preview"}}},[t._v("活动预览")]),t._v(" "),a("span",{class:{act:"manage"==t.curModalTab},on:{click:function(e){t.curModalTab="manage"}}},[t._v("渠道管理")])]),t._v(" "),a("div",{staticClass:"m-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"preview"==t.curModalTab,expression:"curModalTab == 'preview'"}],staticClass:"preview flexBox"},[a("preview-phone",{attrs:{userActivityId:t.indexAct.actid||1e4}}),t._v(" "),a("div",{staticClass:"preview-data"},[a("div",{staticClass:"img-box flexBox"},[a("img",{attrs:{src:t.indexAct.img,alt:""}}),t._v(" "),a("div",{staticClass:"flex1"},[a("div",{staticClass:"title"},[a("span",{staticClass:"title-tag"},[t._v("砍价")]),t._v(" "),a("span",{staticClass:"title-text"},[t._v(t._s(t.indexAct.activityName))])]),t._v(" "),a("p",{staticClass:"des"},[t._v(t._s(t.indexAct.description))]),t._v(" "),a("div",{staticClass:"time"},[a("span",{staticClass:"val"},[a("i",{staticClass:"el-icon-time"}),t._v("创建时间："+t._s(t.indexAct.startTime))]),t._v(" "),a("span",{staticClass:"edit",on:{click:t.toEdit}},[t._v("去编辑\n                  "),a("span",{staticClass:"el-icon-edit-outline"})])])])]),t._v(" "),a("div",{staticClass:"preview-share"},[a("div",{staticClass:"share-code"},[a("img",{attrs:{src:"/static/imgs/index/wechat-code.png",alt:""}}),t._v(" "),a("div",{staticClass:"share-code_label"},[t._v("扫一扫分享到微信")]),t._v(" "),a("div",{staticClass:"down-code"},[a("i",{staticClass:"el-icon-download"}),t._v("下载二维码")])]),t._v(" "),a("div",{staticClass:"share-otherWay"},[a("div",{staticClass:"share-otherWay_title"},[t._v("分享到：")]),t._v(" "),a("ul",{staticClass:"other-way"},[a("li",[a("i",{staticClass:"el-icon-edit-outline"}),t._v("QQ")]),t._v(" "),a("li",[a("i",{staticClass:"el-icon-edit-outline"}),t._v("QQ空间")]),t._v(" "),a("li",[a("i",{staticClass:"el-icon-edit-outline"}),t._v("微博")])]),t._v(" "),a("div",{staticClass:"link-copy-wrap"},[a("el-input",{attrs:{placeholder:"请输入内容",value:"http://baidu.com"}},[a("template",{slot:"append"},[t._v("复制链接")])],2)],1),t._v(" "),a("div",{staticClass:"preview-share_describe"},[t._v("您可以将活动链接复制到您的公众号菜单或自定义回复中。")])])]),t._v(" "),a("div",{staticClass:"spread"},[a("i",{staticClass:"el-icon-edit-outline"}),t._v("\n            我要推广\n          ")])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"manage"==t.curModalTab,expression:"curModalTab == 'manage'"}],staticClass:"manage"},[a("div",{staticClass:"label"},[t._v("哪个渠道客户/流量最多？设置不同渠道分享链接你就知道")]),t._v(" "),a("div",{staticClass:"spreadWay"},[a("div",{staticClass:"default"},[a("div",{staticStyle:{"font-size":"16px",color:"#5A5A5A"}},[t._v("默认渠道分享：")]),t._v(" "),a("div",{staticClass:"share-code"},[a("img",{attrs:{src:"/static/imgs/index/wechat-code.png",alt:""}}),t._v(" "),a("div",{staticClass:"share-code_label",staticStyle:{color:"#5A5A5A"}},[t._v("扫一扫分享到微信\n                "),a("i",{staticClass:"el-icon-download"})])]),t._v(" "),a("div",{staticClass:"link-copy-wrap"},[a("el-input",{staticClass:"link-copy-input",attrs:{placeholder:"请输入内容",value:"http://baidu.com"}},[a("template",{slot:"append"},[t._v("复制链接")])],2)],1),t._v(" "),a("div",{staticClass:"preview-share_describe"},[t._v("您可以将活动链接复制到您的公众号菜单，或自定义回复中")])]),t._v(" "),a("div",{staticClass:"other"},[a("div",{staticStyle:{"font-size":"16px",color:"#5A5A5A"}},[t._v("其他渠道分享：")]),t._v(" "),a("div",{staticClass:"other-describe"},[a("span",{staticClass:"other-describe_text"},[t._v("您可将连接（或二维码）放置在微信公众号、或者户外广告等不同渠道，供用户访问。结果统计中可区分用户来自哪个渠道")]),t._v(" "),a("el-button",{on:{click:function(e){t.createChannel("默认值")}}},[a("i",{staticClass:"el-icon-plus"}),t._v("添加渠道")])],1),t._v(" "),a("div",{staticClass:"spread-way-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.spreadWayTable,border:"","max-height":"250"}},[a("el-table-column",{attrs:{label:"渠道名称",type:"index",prop:"name",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{class:{editState:0==t.editState.nameState},staticStyle:{width:"72%",float:"left"},attrs:{placeholder:t.editState.nameState?"未填写":"最多20字",disabled:t.editState.nameState},model:{value:e.row.channel,callback:function(a){t.$set(e.row,"channel",a)},expression:"scope.row.channel"}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.editState.nameState,expression:"editState.nameState"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(e){e.preventDefault(),t.editState.nameState=!t.editState.nameState}}},[t._v("\n                        修改\n                      ")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.editState.nameState,expression:"!editState.nameState"}],staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small"},on:{click:function(a){a.preventDefault(),t.editChannel(e.row)}}},[t._v("\n                        保存\n                      ")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"链接",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",[t._v(t._s(e.row.linkUrl))]),t._v(" "),a("el-button",{attrs:{type:"text"}},[t._v("复制")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"二维码",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"spread-code"},[a("img",{attrs:{src:e.row.urlImg,alt:""}}),t._v(" "),a("i",{staticClass:"el-icon-download"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)])]),t._v(" "),a("div",{staticClass:"spread"},[a("i",{staticClass:"el-icon-edit-outline"}),t._v("我要推广")])])])]):t._e(),t._v(" "),t._e(),t._v(" "),a("dialog-preview",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{actid:"1"}})],1)},N=[],L={render:I,staticRenderFns:N},M=L,$=a("Z0/y"),W=n,F=$(E,M,!1,W,"data-v-8dbab9a4",null);e.default=F.exports},kiAC:function(t,e){},n95b:function(t,e,a){"use strict";var s=a("3cXf"),i=a.n(s),n=a("hRKE"),c=a.n(n);e.a={addClass:function(t,e){var a=t.getAttribute("class")||"";a=a.concat(" "+e),t.setAttribute("class",a)},removeClass:function(t,e){var a=t.getAttribute("class");a=a.replace(e,""),t.setAttribute("class",a)},checkPhone:function(t){return/^1(3|4|5|7|8)\d{9}$/.test(t)},checkName:function(t){return/^[a-zA-Z0-9_\u4e00-\u9fa5]{6,20}$/.test(t)},checkPsw:function(t){return/^([a-zA-Z0-9]){6,20}$/.test(t)},checkEmail:function(t){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t)},formatDate:function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},DateCalculate:function(t,e){var a=e-t;a/=1e3;var s=parseInt(a/86400);a-=86400*s;var i=parseInt(a/3600);a-=3600*i;var n=parseInt(a/60);return a-=60*n,{day:s,hours:i,minutes:n,t:a}},localData:{set:function(t,e){var a=null;if("object"===(void 0===e?"undefined":c()(e)))try{a=i()(e)}catch(t){console.log(a)}else"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e||(a=e);localStorage.setItem(t,a)},get:function(t){var e=localStorage.getItem(t);if("string"==typeof e)try{return e.search(/^\{/)>-1||e.search(/^\[/)>-1?JSON.parse(e):e}catch(t){console.log(e)}},remove:function(t){localStorage.removeItem(t)}},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},parseJson:function(t){if("string"!=typeof t){if("object"==(void 0===t?"undefined":c()(t)))return t;throw new Error("params is not json type")}try{return t.search(/^\{/)>-1||t.search(/^\[/)>-1?JSON.parse(t):t}catch(t){throw new Error("Cannot be converted to json format.")}}}},rA5e:function(t,e,a){"use strict";var s=a("TseZ");e.a={self:function(t){return Object(s.a)("/pi/bizuser/self",t)},isLogin:function(t){return Object(s.a)("/pi/bizuser/login/state",t)},update:function(t){return Object(s.a)("/pi/bizuser/update",t)},improve:function(t){return Object(s.a)("/pi/bizuser/furnish",t)},list:function(t){return Object(s.a)("/pi/bizorder/list",t)},initIndex:function(t){return Object(s.a)("/pi/bizactivity/initIndex",t)},indexTags:function(t){return Object(s.a)("/pi/bizactivity/indexTags",t)},query:function(t){return Object(s.a)("/pi/business/channel/query",t)},channelDelete:function(t){return Object(s.a)("/pi/business/channel/delete",t)},channelCreate:function(t){return Object(s.a)("/pi/business/channel/create",t)},channelEdit:function(t){return Object(s.a)("/pi/business/channel/edit",t)},qrcode:function(t){return Object(s.a)("/downloadImg/qrcode/normal",t,"get","http://1655w941f1.51mypc.cn:18888")},industry:function(t){return Object(s.a)("/pi/common/industry",t)},childIndustry:function(t){return Object(s.a)("pi/bizactivity/childTags",t)},industryInfo:function(t){return Object(s.a)("/pi/bizuser/industry/info",t)},resetPsw:function(t){return Object(s.a)("/pi/bizuser/changepwd",t)},resetGetCode:function(t){return Object(s.a)("/pi/common/send/sms/identity",t)},mine:function(t){return Object(s.a)("pi/bizactivity/mine",t)}}},ucCG:function(t,e){},"v/ON":function(t,e){}});
//# sourceMappingURL=2.3db42d6bf9e6dacd6952.js.map